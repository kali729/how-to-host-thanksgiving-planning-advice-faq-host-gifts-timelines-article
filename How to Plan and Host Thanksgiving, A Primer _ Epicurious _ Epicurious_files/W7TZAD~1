(()=>{var vt=Object.create;var ie=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var kt=Object.getOwnPropertyNames;var Et=Object.getPrototypeOf,Tt=Object.prototype.hasOwnProperty;var It=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),j=(e,t)=>{for(var n in t)ie(e,n,{get:t[n],enumerable:!0})},Ct=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kt(t))!Tt.call(e,o)&&o!==n&&ie(e,o,{get:()=>t[o],enumerable:!(r=At(t,o))||r.enumerable});return e};var St=(e,t,n)=>(n=e!=null?vt(Et(e)):{},Ct(t||!e||!e.__esModule?ie(n,"default",{value:e,enumerable:!0}):n,e));var st=It((rt,ot)=>{var Qt=function(){"use strict";var e=0;function t(s){var m=[],p=0,d=0;this.push=function(c){p-d>=s&&++d>=s&&(d=0,p=s-1),m[p%s]=c,p++},this.asArray=function(){var c=m.slice(d,Math.min(p,s)),u=m.slice(0,Math.max(p-s,0));return c.concat(u)},this.list=m}function n(s,m){for(var p=m,d=0;d<s.length;d++){var c=s[d],u=p.r;u[c]||(u[c]={w:c,r:{},i:e++}),p=u[c]}return p}function r(s,m,p){var d;return p[s]?d=p[s]:(d=function(c,u){for(var h=[[u,0]],v={},y=[];h.length;){var i=h.shift(),a=i[0],l=i[1],f=a.r,g=c[l];if(g===void 0&&a.fn&&!v[a.i]?(v[a.i]=1,y.push(a.fn)):f[g]&&h.push([f[g],l+1]),f["#"])for(var A=l;A<=c.length;A++)h.push([f["#"],A]);g&&f["*"]&&h.push([f["*"],l+1])}return y}(s.split("."),m),p[s]=d),d}var o=function(){var s={w:"",r:{},i:e++},m={},p=new t(9999);function d(u,h){var v=n(u.split("."),s),y=v.fn||[];return y.push(h),v.fn=y,m={},function(){var i=y.indexOf(h);i>-1&&y.splice(i,1)}}function c(u,h){var v=Date.now();p.push([u,v]);for(var y=r(u,s,m),i={topic:u},a=0;a<y.length;a++)for(var l=y[a],f=0;f<l.length;f++)l[f](h,i)}this.emit=c,this.on=d,this.history=function(u){var h={w:"",r:{},i:e++};n(u.split("."),h).fn=1;for(var v=[],y={},i=p.asArray(),a=0;a<i.length;a++){var l=i[a];r(l[0],h,y).length&&v.push(l)}return v},this.publish=c,this.subscribe=d};return o.Ring=t,o}();typeof rt<"u"&&(ot.exports=Qt)});var S={};j(S,{add:()=>x,initialize:()=>fe,isEmpty:()=>He,isEnabled:()=>$e,queue:()=>w,reset:()=>_t,send:()=>me,start:()=>he});var L={};j(L,{clearInterval:()=>H,clearTimeout:()=>Oe,ready:()=>W,setInterval:()=>C,setLoaded:()=>Bt,setTimeout:()=>$});var Se=()=>new Promise(e=>{document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e()});var C=window.setInterval,H=window.clearInterval,$=window.setTimeout,Oe=window.clearTimeout,ce=!1,Bt=e=>ce=e,W=async()=>{if(ce)return;let e=document.createElement("iframe");await Se(),window.document.body.append(e),C=e&&e.contentWindow&&e.contentWindow.setInterval&&e.contentWindow.setInterval.bind(window)||window.setInterval,H=e&&e.contentWindow&&e.contentWindow.clearInterval&&e.contentWindow.clearInterval.bind(window)||window.clearInterval,$=e&&e.contentWindow&&e.contentWindow.setTimeout&&e.contentWindow.setTimeout.bind(window)||window.setTimeout,Oe=e&&e.contentWindow&&e.contentWindow.clearTimeout&&e.contentWindow.clearTimeout.bind(window)||window.clearTimeout,e.remove(),ce=!0};var D=e=>{let t=new Set;JSON.stringify(e,(r,o)=>t.add(r)&&o);let n=Array.from(t).sort();return JSON.stringify(e,n)},ae=e=>JSON.parse(e);var G=e=>String.fromCharCode.apply(null,e),K=e=>btoa(G(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),R=e=>new TextEncoder().encode(e);var V=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),je=e=>atob(e.replace(/-/g,"+").replace(/_/g,"/")),Le=e=>Uint8Array.from(je(e),t=>t.charCodeAt(0));var We=({payload:e,key:t="",subtle:n=crypto.subtle,sort:r=!0})=>{let o={alg:"HS256",typ:"JWT",ver:1},s,m;try{s=D(o),m=D(e)}catch{return Promise.reject("Cannot JSON encode the JWT")}let p,d,c;try{p=V(s),d=V(m),c=p+"."+d}catch{return Promise.reject("Cannot base64url encode the JWT")}return n.importKey("raw",R(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]).then(u=>n.sign("HMAC",u,R(c))).then(u=>V(G(new Uint8Array(u)))).then(u=>"".concat(p,".").concat(d,".").concat(u))};var q={};j(q,{initialize:()=>le,isBranched:()=>B,setCurrentScript:()=>Re,setLocation:()=>Me,state:()=>b});var F={};j(F,{id:()=>ue});var Lt=()=>{try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch{return}},Pt=()=>Math.floor(4294967295*Math.random()),ue=Lt()||Pt();var b={},Re=e=>{b.currentScript=e},De;Re(((De=window.document.currentScript)==null?void 0:De.src)||"http://localhost/deploy/test/cytokine.js");var Me=e=>{b.location=e,b.cytokineBranch=new URL(e).searchParams.get("cytokine-branch")};Me(window.location);var Wt=({asset:e,branch:t="master"})=>{let{origin:n}=new URL(b.currentScript);return[n,"cytokine","deploy",t,e].join("/")},Dt=({url:e,id:t})=>new Promise((n,r)=>{let o=document.createElement("script");o.id=t,o.src=e,o.onload=()=>{b.reloaded=o.src,n()},o.onerror=r,o.async=!0,addEventListener("DOMContentLoaded",()=>document.body.append(o)),b.resolve&&o.onload()}),Rt=async()=>{let e="cytokine.js",t=b.cytokineBranch;try{let n=Wt({asset:e,branch:t});await Dt({url:n,id:"cytokine-branch"})}catch(n){throw console.error("Cytokine: failed to load ".concat(e," on branch ").concat(t)),n}},B=!1,le=async({currentBranch:e="master",resolve:t=!1}={})=>{if(b.reloaded=!1,b.resolve=t,B=e!=="master",x({type:"library",id:"initialize",build:{version:"1.0.0",date:"2024-11-12T15:34:41.848Z",profile:"production",branch:"master",commit:"948991cd8f626dc503c8a3b6ba6640f4468409c2",environment:"production"}}),!B&&b.cytokineBranch&&b.cytokineBranch!==e)return Rt()};var Mt={strictlyNecessary:"C0001",performance:"C0002",functional:"C0003",targeting:"C0004",socialMediaCookies:"C0005"},Ne=(e,t=window)=>typeof t.OnetrustActiveGroups>"u"||t.OnetrustActiveGroups.includes(Mt[e]);var ze=(e=window.crypto)=>e.getRandomValues(new Uint8Array(16)),Ue=(e,t=window.crypto.subtle)=>t.importKey("raw",Le(e),{name:"AES-CTR"},!1,["encrypt","decrypt"]),_e=(e,t,n,r=window.crypto.subtle)=>r.encrypt({name:"AES-CTR",counter:t,length:128},e,R(n)).then(o=>new Uint8Array(o)).then(o=>K(o));var pe,Je=async({domain:e,key:t,path:n})=>{if(!e||!t)return n;try{pe=pe||await Ue(t);let r=ze(),o=K(r),s=await _e(pe,r,"https://".concat(e).concat(n));return"".concat(o).concat(s)}catch(r){return console.error("Error generating a rotated path",r.message),""}};var w={events:[],context:{},index:0},_t=({context:e}={})=>{w.events=[],w.context={},w.index=0},He=()=>w.events.length<=w.index,x=e=>{e.time=Math.trunc(performance.now()),w.events.push(e)},fe=({context:e}={})=>{w.context=e,w.context.pageview=F},Jt=Math.random()*100<=5,$e=(e=Jt)=>(B||e)&&Ne("performance"),me=async({client:e=fetch}={})=>{if(!$e()||He())return;let t=w.events.slice(w.index,w.index+30);w.index+=w.events.length;let n="/cytokine/log",r=window.location.hostname,o=await Je({domain:r,key:"EZZW3rlNie2M3VD64Rj3Bw",path:n}),s="https://".concat(r,"/").concat(o),m=await We({payload:{...w.context,events:t},key:"gkqTHpdRoTZkVuier0moNQT5238rf81e"});navigator!=null&&navigator.sendBeacon?await navigator.sendBeacon(s,m):await e(s,{method:"POST",credentials:"include",body:m})},he=async()=>{document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&me()},!1),await W(),C(()=>me(),2500)};var Q={};j(Q,{emit:()=>xe,events:()=>U,history:()=>ve,on:()=>be,reset:()=>$t,subscriptions:()=>P});var Y=Array.isArray,M=e=>e!=null&&typeof e=="object",O=e=>typeof e<"u";var ye=e=>typeof e=="function",Ht=e=>typeof e>"u",ge=e=>(...t)=>!e(...t),Ge=e=>Object.keys(e).length===0;var Ke=e=>t=>e===t,I=(e,t)=>Y(e)&&Y(t)?!t.find(n=>!e.find(r=>I(r,n)))||!e.find(n=>!t.find(r=>I(r,n))):Y(e)&&!M(t)?!!e.find(n=>I(n,t)):Y(t)&&!M(e)?!!t.find(n=>I(n,e)):M(e)&&M(t)?!Object.entries(t).find(([n,r])=>!I(e[n],r)):Ht(t)?!0:e===t,Ve=(e=[],t=[])=>e.reduce((n,r,o)=>(n[r]=t[o],n),{}),Fe=(e,t)=>[e.slice(0,t),e.slice(t)],E=(e,t)=>t.split(".").reduce((n,r)=>n&&n[r],e),N=(e,t,n)=>{let r=t.split("."),[o,s]=Fe(r,-1),m=o.reduce((p,d)=>(p&&!M(p[d])&&(p[d]={}),p[d]),e);return m&&(m[s]=n),e},we=(e,t,n)=>{let r=t.split("."),[o,s]=Fe(r,-1),m=o.reduce((p,d)=>p&&p[d],e);return m&&delete m[s],e},z=(e,t)=>JSON.parse(JSON.stringify(e),t);var U=[],P=[],$t=()=>{U=[],P=[]},be=({id:e=".*",payload:t={},callback:n})=>{let r={id:e,payload:t,callback:n};return P.push(r),()=>{let o=s=>m=>!I(s,m);P=P.filter(o(r))}},xe=({id:e,payload:t={},timestamp:n=Date.now()})=>{let r={id:e,payload:t,timestamp:n};U=U.concat(r),P.filter(o=>e.match(new RegExp(o.id))).filter(o=>I(t,o.payload)).forEach(o=>o.callback(r))},ve=({id:e=".*",payload:t={}}={})=>U.filter(n=>n.id.match(new RegExp(e))).filter(n=>I(n.payload,t));var Gt=e=>(t={},n)=>{xe({id:e,payload:t,timestamp:n}),x({type:"bus-event",id:e,payload:t})};var Z=(e,t={})=>n=>(ve({id:e,payload:t}).forEach(r=>n(r)),be({id:e,payload:t,callback:n})),Ae=({id:e,payload:t,timestamp:n})=>Gt(e)(t,n);var qe=({id:e,payload:t,callback:n})=>Z(e,t)(n),Ye=Z("adblock.detected"),Qe=Z("adblock.not.detected"),gn=Z("onetrust.groups.updated");var Xe=({plus:e=0,minus:t=0,date:n=new Date}={})=>{let r=new Date;return r.setTime(n.getTime()+e*1e3-t*1e3),r};var ke=document,Vt=["localhost","0.0.0.0","127.0.0.1"],Ft=e=>{let t=e.hostname;return!e||Vt.includes(t)||t.match(/^local\./)?null:t.match(/^(www|stag|stag2|stg)\./)?t.split(".").slice(1).join("."):t},et=e=>{let t=ke.cookie;if(!t||!t.length||!e)return;let n=t.split(";").map(o=>o.split("=").map(s=>s.trim())),[,r]=n.find(([o])=>o===e)||[];return r},tt=(e,t,n)=>{let r=Ft(ke.location);ke.cookie="".concat(e,"=").concat(t,";")+(r?"domain=".concat(r,";secure;samesite=none;"):"")+(n?"expires=".concat(Xe({plus:n}).toUTCString(),";"):"")+"path=/;"};var X={};j(X,{consumer:()=>ct,initialize:()=>Te,producer:()=>_});var Yt=new Error("channel not available"),k=(...e)=>e.filter(t=>!!t).join("."),nt=({bus:e,target:t})=>{let n={bus:e,domains:{},products:new Set,subscriptions:[]};if(!O(t))return Yt;n.bus.target(t),n.bus.prefix("cytokine");let r=i=>a=>i.action===a.action&&(i.key.includes(a.key)||a.key.includes(i.key));n.bus.subscribe("set",({key:i,value:a})=>{let l=k("domains",i);N(n,l,a),n.subscriptions.filter(r({key:i,action:"set"})).forEach(({key:f,action:g,callback:A})=>{let oe=k("domains",f),se=E(n,oe);A(f,g,se,n.credentials)})}),n.bus.subscribe("unset",({key:i,value:a})=>{let l=k("domains",i);we(n,l,a),n.subscriptions.filter(r({key:i,action:"unset"})).forEach(({key:f,action:g,callback:A})=>{let oe=k("domains",f),se=E(n,oe);A(f,g,se,n.credentials)})}),n.bus.subscribe("register",(i,a)=>{n.products.forEach(l=>u("set",l))});let o=i=>{n.credentials=i,n.bus.authenticate(i),n.bus.emit("register")},s=()=>{n.domains={},n.subscriptions=[]},m=i=>{let a=k("domains",i),l=E(n,a);return u("get",i),l},p=i=>{let a=k("domains",i),l=E(n,a);return u("has",i),O(l)},d=(i,a)=>{let l=k("domains",i);return N(n,l,a),n.products.add(i),u("set",i),a},c=(i,a)=>{let l=k("domains",i);return we(n,l),n.products.delete(i),u("unset",i),a},u=(i,a)=>{let l=k("domains",a),f=E(n,l);e.emit(i,{key:a,value:f})},h=(i,a,l)=>{if(!ye(l))return;let f={key:i,action:a,callback:l};return n.subscriptions.push(f),()=>{n.subscriptions=n.subscriptions.filter(ge(Ke(f)))}};return{state:n,bus:e,register:o,reset:s,get:m,has:p,set:d,unset:c,subscribe:h,readable:i=>{let a=k("domains",i);O(E(n,a))||N(n,a,{});let l=z(E(n,a)),f=()=>{let g=E(n,a);Object.keys(l).forEach(A=>delete l[A]),Object.keys(g).forEach(A=>l[A]=g[A])};return h(i,"set",f),h(i,"unset",f),l},writable:i=>{let a=k("domains",i);return O(E(n,a))||N(n,a,{}),new Proxy({},{set(l,f,g){if(O(g))return l[f]=z(g),d(k(i,f),g),!0}})}}};var Zt=St(st(),1);var Ee=()=>{let e=EventTarget,t={},n=c=>{t.credentials=c},r=c=>{t.target=c},o=c=>{t.prefix=c},s=c=>[t.prefix,c].join(".");return{backer:e,state:t,authenticate:n,target:r,prefix:o,create:()=>{let c=new e;return r(c),c},emit:(c,u)=>t.target.dispatchEvent(new CustomEvent(s(c),{detail:{credentials:t.credentials,payload:u}})),subscribe:(c,u)=>{let h=({detail:v})=>{try{let{payload:y,credentials:i}=v;u(y,i)}catch(y){console.log(y)}};return t.target.addEventListener(s(c),h),()=>{t.target.removeEventListener(s(c),h)}}}};var en=({credentials:e,bus:t,target:n})=>{let r=nt({bus:t||Ee(),target:n||window.document});return r.register(e),{consumer:{channel:r,snapshot:o=>{let s=r.get(o);return O(s)?z(s):void 0},has:o=>r.has(o),subscribe:(o,s)=>r.subscribe(o,"set",s),proxy:o=>r.readable(o)},producer:{channel:r,publish:(o,s)=>r.set(o,s),unpublish:o=>r.unset(o),proxy:o=>r.writable(o)}}},it=en;var ct,_,at=[{id:"cytokine",key:"oDRPFVhTT1ZGKHdcYRrSZZG14giHO1tU"},{id:"journey",key:"MCfNvUszQue4F94i3tdlEyrG97dQ9c2c"}],tn=(e={},t={})=>{let n=!!at.find(({key:r,id:o})=>t.id===o&&t.key===r);x({type:"client",id:"register",valid:n,credentials:{id:t.id}})},Te=()=>{let e=at.find(({id:t})=>t==="cytokine");client=it({credentials:e}),_=client.producer,ct=client.consumer,client.producer.channel.bus.subscribe("register",tn)};var dt=window,ut=e=>{let t=!1,n=d=>{t=!0,x({type:"localStorage",id:"disabled",item:e,message:d})},r=()=>{try{return ae(dt.localStorage.getItem(e)||"{}")}catch({message:d}){return n(d),{}}},o=(d={})=>{try{return dt.localStorage.setItem(e,D(d)),!0}catch({message:c}){return n(c),!1}};return{read:d=>t?void 0:r()[d],write:(d,c)=>{if(t)return!1;let u=r();return u[d]=c,o(u)},remove:d=>{if(t)return!1;let c=r();return c[d]===void 0?!1:(delete c[d],o(c))},disable:n,isDisabled:()=>t}};var Ie=async(e,t,n=1e3)=>{let r;await W(),r=C(()=>{e()&&(H(r),t())},n)},ee=async(e,t,n=1e3)=>{if(e())return t();Ie(e,t,n)};var J=window;J.setInterval=C;J.setTimeout=$;var T,rn=[],re="CN_cab",pt="div[id*='google_ads_iframe'] > iframe",mt=e=>J.document.querySelectorAll(e).length,on=()=>{var e;return(e=J.cns)==null?void 0:e.library},sn=e=>!e(),yt=ut("cytokine_journey"),ft=e=>{switch(e){case!0:return"1";case!1:return"0";default:return}},ne=e=>{tt(re,ft(e)),yt.write(re,ft(e))},ht=e=>{switch(e){case"1":return!0;case"0":return!1;default:return}},gt=()=>{let e=ht(et(re)),t=ht(yt.read(re));if(t!==void 0&&e===void 0)return ne(t),t;if(e!==void 0&&t===void 0||t!==void 0&&e!==void 0&&t!==e)return ne(e),e;if(e!==void 0)return e;if(t!==void 0)return t},te=e=>{T!==e&&(T=e,_.publish("adblock.v1",{presence:T}),x({type:"adblock",id:"change",presence:T}),T!=gt()&&ne(T),rn.forEach(t=>t(T)))},wt=()=>{T=gt(),_.publish("adblock.v1",{presence:T}),x({type:"adblock",id:"initialize",presence:T}),Ye(()=>{J.setTimeout(()=>te(!mt(pt)),5e3)}),Qe(()=>te(!1)),Ie(()=>sn(on),()=>{x({type:"adblock",id:"ads_library_blocked"}),te(!0)},2500),ee(()=>mt(pt),()=>{x({type:"adblock",id:"google_ads_rendered"}),te(!1)},100)};var an={},dn=()=>{Object.entries(an).forEach(([e,t])=>{qe({id:e,callback:({payload:n})=>window.cnBus.emit(t,n)})})},un={"ads.environment.adblock.detected":"adblock.detected","ads.environment.adblock.notdetected":"adblock.not.detected"},Ce=new RegExp(/#{([^.]+?)}/g),bt=(e,t)=>{let n=e.matchAll(Ce),r=Array.from(n).map(([,m])=>m),o=new RegExp(e.replace(Ce,"([^.]+)")),s=(t.match(o)||[]).slice(1);return Ve(r,s)},ln=()=>{Object.entries(un).forEach(([e,t])=>{let n=e.replace(Ce,"#");window.cnBus.history(n).forEach(([r,o])=>{let s=bt(e,r);Ae({id:t,timestamp:o,...Ge(s)?{}:{payload:s}})}),window.cnBus.on(n,(r={},{topic:o}={})=>{if(!o)return;let s=bt(e,o);Ae({id:t,payload:{...s,...r}})})})},xt=()=>{ee(()=>!!window.cnBus,()=>{ln(),dn()},100)};(async function(){if(await le(),b.reloaded)return;let e={pageview:ue,url:window.document.location.toString()};fe({context:e}),he(L),Te(),xt(),wt(),B&&(window.cytokinePanel={cBus:Q,client:X,eventLogger:S,library:q})})();})();
